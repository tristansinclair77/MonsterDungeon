# Copilot Instructions for Monster Dungeon
# Feature: Base Debug Menu (Toggle with ` key)

Create a new WPF user control called **DebugMenu.xaml** inside `Presentation/Views/Debug/`.
It must serve as an in-game overlay that can be toggled on/off while the game runs.

## Core Requirements
1. **Hotkey Toggle**
   - Pressing the backtick (`) key shows/hides the Debug Menu overlay.
   - Implement key listening globally in `MainWindow.xaml.cs`.
   - When toggled, the menu fades in/out (use basic opacity animation).

2. **Layout**
   - The Debug Menu is a semi-transparent panel aligned to the top-left of the screen.
   - Use a vertical StackPanel inside a Border with rounded corners and drop shadow.
   - Background color: black with 60% opacity.
   - Width: 320 px; Height: auto.
   - ScrollViewer if content exceeds height.

3. **Controls to Include (Base UI)**
   - A “Close Menu” button (binds to Hide command).
   - A labeled **Dropdown (ComboBox)** for *Color Scheme Selection*.
   - A generic **Button**, **Dropdown**, and **TextBox** for future debug items (placeholders).
   - Each control should have a bound command or property in a new `DebugMenuViewModel`.

4. **Color Scheme Functionality**
   - Populate the color scheme dropdown with several named themes:
     - DefaultDark, DefaultLight, Crimson, Emerald, Azure, Amber, Amethyst.
   - On selection, immediately apply the chosen color scheme to the active window background.
   - Integrate this by calling a new `ThemeManager.ApplyDebugTheme(string themeName)` method.
   - This method should temporarily override the current ThemeManager palette for testing.

5. **MVVM Setup**
   - Add a new ViewModel file: `Application/ViewModels/DebugMenuViewModel.cs`.
   - Use `[ObservableProperty]` attributes for:
     - `IsVisible` (bool)
     - `SelectedTheme` (string)
     - `AvailableThemes` (List<string>)
   - Add commands for:
     - `ToggleMenuCommand`
     - `ApplyThemeCommand`

6. **Integration**
   - In `MainViewModel`, hold a reference to `DebugMenuViewModel` injected via DI.
   - In `MainWindow.xaml`, overlay `<views:DebugMenu Visibility="{Binding DebugMenu.IsVisible, Converter={BooleanToVisibilityConverter}}"/>` on top of main content.
   - Register `DebugMenuViewModel` as Singleton in `App.xaml.cs`.

7. **ThemeManager Update**
   - Extend `ThemeManager` with a method:
     ```csharp
     public void ApplyDebugTheme(string themeName)
     {
         switch (themeName)
         {
             case "Crimson": CurrentTheme.PrimaryColor = Colors.Crimson; break;
             case "Emerald": CurrentTheme.PrimaryColor = Colors.Green; break;
             case "Azure": CurrentTheme.PrimaryColor = Colors.DeepSkyBlue; break;
             // etc.
             default: ResetToDefaultTheme(); break;
         }
     }
     ```
   - Ensure UI refreshes automatically via binding or theme refresh logic.

8. **Testing**
   - Build and run in Debug mode.
   - Press the backtick key to open/close the overlay.
   - Changing themes updates the window color in real time.

## Files to Modify / Add
- [NEW] `Presentation/Views/Debug/DebugMenu.xaml`
- [NEW] `Application/ViewModels/DebugMenuViewModel.cs`
- [MODIFY] `App.xaml.cs` → Register `DebugMenuViewModel`
- [MODIFY] `MainViewModel.cs` → Add property for DebugMenuViewModel
- [MODIFY] `MainWindow.xaml` & `.cs` → Add overlay and toggle key listener
- [MODIFY] `ThemeManager.cs` → Add `ApplyDebugTheme()` method

Result: A fully functional debug overlay accessible at runtime for theme testing and future debugging actions.
